"use strict";var config={isKhGh:yo.getQueryString("isKhGh")||0,role:localStorage.userRole,api_xspmReport:"/report/xspmReport.do",api_SaleYjtj:"/mainIndex/showSaleYjtj",api_Xstj:"/mainIndex/showSwgwXstj",api_Yjmb:"/mainIndex/showSwgwYjmb",api_yzjb:"/mainIndex/showYzsjdk",api_detail:"/main/showdfSaleProcessDetail.do",api_zhou:"/report/showReportDate.do",api_all:"/mainIndex/showAll",api_task:"/workBench/taskList.do",api_shenhe:"/workBench/mysh.do",api_wdtx:"/workBench/callList.do?flag=2",api_gqtx:"/workBench/callList.do?flag=1",api_swgw:"/mainIndex/showSwgwYjmb",flag:yo.getQueryString("flag")};"销售精英"!=config.role&&"经理"!=config.role||(config.isKhGh=4);var colors=["#666666","#666666"],option={title:{text:"电话量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","有效电话量"]},xAxis:[{type:"category",data:["周一","周二","周三","周四","周五"]}],yAxis:[{type:"value",name:"电话量",position:"left",axisLine:{lineStyle:{color:colors[0]}}},{type:"value",name:"有效电话量",position:"right",min:0,axisLine:{lineStyle:{color:colors[1]}}}],series:[{name:"电话量",type:"bar",data:[],barWidth:18,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"有效电话量",type:"bar",yAxisIndex:1,data:[],barWidth:18,itemStyle:{normal:{color:"#459df5"}}}]};function salerList(t,e,a,i,n){layer.open({type:2,title:"合同记录详情",area:["100%","100%"],content:"saler_sales_detail.html?saleId="+t+"&saleName="+e+"&startTime="+a+"&endTime="+i+"&flag="+n})}var app1={},option1=null;option1={title:{text:"意向客户数",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["意向客户数"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#fdb54e"}}}]};var app2={},option2=null;option2={title:{text:"拜访量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["拜访量"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#fdb54e"}}}]};var app3={},option3=null;option3={title:{text:"签单量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["签单量"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#459df5"}}}]};var option4={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["已成交客户数","订单数量","订单总金额","到款金额"]},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"数量",position:"left"},{type:"value",name:"金额",position:"right"}],series:[{name:"已成交客户数",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"订单数量",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#459df5"}}},{name:"订单总金额",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#52c1a6"}}},{name:"到款金额",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#fdb54e"}}}]},app5={},option5=null;option5={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["商务顾问业绩目标完成情况"]},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:""},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#d9ebfd"},{offset:.5,color:"#f6fafe"},{offset:.8,color:"#ffffff"}])}},itemStyle:{normal:{color:"#459df5"}}}]};var option6={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","意向客户数"]},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"电话量",position:"left"},{type:"value",name:"意向客户数",position:"right"}],series:[{name:"电话量",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"意向客户数",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#459df5"}}}]},app7={},option7=null;option7={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["运作简报"]},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:""},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#d9ebfd"},{offset:.5,color:"#f6fafe"},{offset:.8,color:"#ffffff"}])}},itemStyle:{normal:{color:"#459df5"}}}]};var radius,dxOnly={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","意向客户数"]},grid:{x:40,x2:40},xAxis:[{type:"category",data:["四月","五月","六月","七月","八月","九月","十月","十一月","十二月","一月","二月","三月"]}],yAxis:[{type:"value",name:"电话量",position:"left"},{type:"value",name:"意向客户数",position:"right"}],series:[{name:"电话量",type:"bar",data:[],barWidth:10,itemStyle:{normal:{color:"#459df5"}}},{name:"意向客户数",type:"bar",yAxisIndex:1,data:[],barWidth:10,itemStyle:{normal:{color:"#53c1a6"}}}]},labelTop={normal:{color:"#fdb54e",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},pieChartOption={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","55%"],radius:radius=["80%","90%"],x:"0%",itemStyle:labelTop,data:[{name:"0%",value:0,itemStyle:labelTop},{name:"电话量进度",value:0,itemStyle:labelBottom}]}]},labelTop2={normal:{color:"#53c1a6",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter2={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom2={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},radius2=["80%","90%"],pieChartOption2={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","55%"],radius:radius2,x:"0%",itemStyle:labelTop,data:[{name:"0%",value:0,itemStyle:labelTop2},{name:"意向客户数进度",value:0,itemStyle:labelBottom2}]}]},labelTop_1={normal:{color:"#ea5849",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter_1={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom_1={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},pieChartOption_1={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","50%"],radius:radius=["80%","90%"],x:"0%",itemStyle:labelTop_1,data:[{name:"0%",value:0,itemStyle:labelTop_1},{name:"业绩到款(季度)",value:0,itemStyle:labelBottom_1}]}]},labelTop_2={normal:{color:"#fdb64e",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter_2={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom_2={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},pieChartOption_2={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","50%"],radius:radius=["80%","90%"],x:"0%",itemStyle:labelTop_2,data:[{name:"0%",value:0,itemStyle:labelTop_2},{name:"合同数量(月)",value:0,itemStyle:labelBottom_2}]}]},labelTop_3={normal:{color:"#ea584b",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter_3={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom_3={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},pieChartOption_3={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","50%"],radius:radius=["80%","90%"],x:"0%",itemStyle:labelTop_3,data:[{name:"0%",value:0,itemStyle:labelTop_3},{name:"委案金额(月)",value:0,itemStyle:labelBottom_3}]}]},labelTop_4={normal:{color:"#51c1a8",label:{show:!0,position:"center",formatter:"{b}",textStyle:{baseline:"top",fontSize:14}},labelLine:{show:!1}}},labelFromatter_4={normal:{label:{formatter:function(t){return 100-t.value+"%"},textStyle:{baseline:"top"}}}},labelBottom_4={normal:{color:"#d3d6da",label:{show:!0,position:"center",fontSize:12},labelLine:{show:!1}},emphasis:{color:"#d3d6da"}},pieChartOption_4={title:{text:"",subtext:"",x:"center"},animation:!1,tooltip:{trigger:"axis",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:8,borderWidth:2,padding:10},series:[{type:"pie",center:["50%","50%"],radius:radius=["80%","90%"],x:"0%",itemStyle:labelTop_4,data:[{name:"0%",value:0,itemStyle:labelTop_4},{name:"拜访客户量(月)",value:0,itemStyle:labelBottom_4}]}]};require(["select2"],function(t){window.app=new Vue({el:"#app",data:{year:(new Date).getFullYear().toString(),startyear:"",endyear:"",isactive:!0,month:"",monthShow:!0,jiduShow:!1,show:!0,show1:!1,show2:!0,show3:!1,show4:!1,show5:!1,c:[],c1:[],c2:[],c4:[],year1:(new Date).getFullYear().toString(),month1:"",SaleYjtj:{ycj:"",dd:"",ddzje:"",yhk:"",dk:""},Salejb:{ddzje:"",hkje:"",ycjkh:"",yjje:"",yxkhs:""},postSaleYjtj:{},postSalejb:{},cainian:(new Date).getFullYear().toString(),YjmbTime:"0",YjmbType:"0",yjmbMonth:"",qubie:!1,qubie1:!0,sevens:[],cjd:"",task:{list:[]},shenhe:{list:[]},mytx:{list:[]},gqtx:{list:[]},postDataTask:{},postDataShenhe:{},postDataMytx:{},postDataGqtx:{},dxmonth:(new Date).getFullYear().toString(),dx:{dhl:"",mbdhl:"",yxkhs:"",mbyxkhs:"",list:[]},swgw:{ddzje:"",htsl:"",mbddzje:"",mbhtsl:"",mbyjdk:"",yjdk:""},idchange3:""},watch:{year:function(t){this.getSaleYjtj(t)},startyear:function(t){this.getSalejb(this.startyear,this.endyear)},endyear:function(t){this.getSalejb(this.startyear,this.endyear)},year1:function(t){this.getData1(t)},cainian:function(t){this.getCainian(t)},YjmbTime:function(t){this.getYjmb(t,this.YjmbType,0)},YjmbType:function(t){console.log(t),0==t?(this.getYjmb(this.YjmbTime,t,0),this.qubie1=!0,this.qubie=!1):(this.getYjmb(this.yjmbMonth,t,1),this.qubie1=!1,this.qubie=!0)},month1:function(t){this.getData2(this.month1)},month:function(t){this.getData(t,0,0)},dxmonth:function(t){this.getDataDx(t,1)}},computed:{dhl:function(){for(var t=[],e=0;e<this.c.length;e++){var a=this.c[e];t.push(a.dhl||0)}return t},yxdhl:function(){for(var t=[],e=0;e<this.c.length;e++){var a=this.c[e];t.push(a.yxdhl||0)}return t},name1:function(){for(var t=[],e=0;e<this.c1.length;e++){var a=this.c1[e];t.push(a.name)}return t},khsl:function(){for(var t=[],e=0;e<this.c1.length;e++){var a=this.c1[e];t.push(a.khsl||0)}return t},ddsl:function(){for(var t=[],e=0;e<this.c1.length;e++){var a=this.c1[e];t.push(a.ddsl||0)}return t},ddzje:function(){for(var t=[],e=0;e<this.c1.length;e++){var a=this.c1[e];t.push(a.ddzje||0)}return t},dkje:function(){for(var t=[],e=0;e<this.c1.length;e++){var a=this.c1[e];t.push(a.dkje||0)}return t}},created:function(){document.getElementById("app").classList.remove("hide")},mounted:function(){var a=this;a.showMonthFirstDay(),laydate.render({elem:"#year",type:"year",done:function(t,e){a.year=t}}),laydate.render({elem:"#year1",type:"year",done:function(t,e){a.year1=t}});var i=laydate.render({elem:"#startyear",max:a.endyear,done:function(t,e){""!==(a.startyear=t)?(n.config.min.year=e.year,n.config.min.month=e.month-1,n.config.min.date=e.date):(n.config.min.year="",n.config.min.month="",n.config.min.date="")}}),n=laydate.render({elem:"#endyear",min:a.startyear,done:function(t,e){""!==(a.endyear=t)?(i.config.max.year=e.year,i.config.max.month=e.month-1,i.config.max.date=e.date):(i.config.max.year="",i.config.max.month="",i.config.max.date="")}});laydate.render({elem:"#month1",type:"month",done:function(t,e){a.month1=t}}),laydate.render({elem:"#yjmbMonth",type:"month",done:function(t,e){a.yjmbMonth=t,a.getYjmb(a.yjmbMonth,a.YjmbType,1)}}),laydate.render({elem:"#cainian",type:"year",done:function(t,e){a.cainian=t}}),laydate.render({elem:"#dxmonth",type:"year",done:function(t,e){a.dxmonth=t}}),this.month1=this.nowMonth(),this.yjmbMonth=this.nowMonth(),this.getSaleYjtj((new Date).getFullYear().toString()),this.getSalejb(this.startyear,this.endyear),this.getData1((new Date).getFullYear().toString()),this.getData2(this.month1),this.getCainian(this.cainian),this.getYjmb(this.YjmbTime,this.YjmbType,0),this.showWen(),this.taskList(),this.shen(),this.tx1(),this.tx2(),this.getDataDx(this.dxmonth),this.getDataSwgw(),this.loop()},methods:{loading:function(t){"close"==t?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)},changeActive:function(t){var e=this;if(1==t)e.show=!0,e.show1=!1,e.monthShow=!0,e.jiduShow=!1,e.getData(e.month,0,0);else{e.show=!1,e.show1=!0,e.monthShow=!1,e.jiduShow=!0;var a=(new Date).getFullYear().toString();e.cjd=a+"-04-01~"+a+"-06-30",e.getData(e.cjd,1,1),e.show2=!0,e.show3=!1,e.show4=!1,e.show4=!1}},htzjd:function(t){var e,a=this,i=(new Date).getFullYear().toString();1==t?(a.cjd=i+"-04-01~"+i+"-06-30",a.show2=!0,a.show3=!1,a.show4=!1,a.show5=!1,e=1):2==t?(a.cjd=i+"-07-01~"+i+"-09-30",a.show2=!1,a.show3=!0,a.show4=!1,a.show4=!1,e=2):3==t?(a.cjd=i+"-10-01~"+i+"-12-31",a.show2=!1,a.show3=!1,a.show4=!0,a.show5=!1,e=3):4==t&&(i=Number(i)+1,a.cjd=i+"-01-01~"+i+"-03-31",a.show2=!1,a.show3=!1,a.show4=!1,a.show5=!0,e=4),a.getData(a.cjd,1,e)},select_init:function(t,e,a,i,n){return $(t).select2({placeholder:e||"请选择",language:"zh-CN",allowClear:a||!1,ajax:{url:"/user/getUserInfo",dataType:"json",type:"post",delay:250,data:function(t){return{page:t.page||1,ROLE_ID:n||i,data:{q:t.term||""}}},processResults:function(t,e){return e.page=e.page||1,config.htz_gw=t,$.each(t,function(){this.id=this.USER_ID,this.text=this.NAME}),{results:t,pagination:{more:10==t.length}}},cache:!0},minimumInputLength:0})},getSaleYjtj:function(t){var e=this;e.loading(),e.postSaleYjtj.time=t,$.ajax({type:"post",url:config.api_SaleYjtj,data:e.postSaleYjtj,async:!0}).done(function(t){e.SaleYjtj.ycj=t.result.ycjkh,e.SaleYjtj.dd=t.result.ddsl,e.SaleYjtj.ddzje=t.result.ddzje,e.SaleYjtj.yhk=t.result.hkje,e.SaleYjtj.dk=t.result.yjje,e.loading("close")})},getSalejb:function(t,e){var a=this;a.loading();var i=t,n=e;a.postSalejb.startTime=i,a.postSalejb.endTime=n,$.ajax({type:"post",url:config.api_SaleYjtj,data:a.postSalejb,async:!0}).done(function(t){a.Salejb.ddzje=t.result.ddzje,a.Salejb.hkje=t.result.hkje,a.Salejb.ycjkh=t.result.ycjkh,a.Salejb.yjje=t.result.yjje,a.Salejb.yxkhs=t.result.yxkhs,a.loading("close")})},getData:function(t,u,y){var g=this;$("body,html").scrollTop(0);var e=t.split("~"),x=e[0],f=e[1];g.loading(),$.ajax({url:config.api_all,async:!0,data:{flag:u,startTime:x,endTime:f},success:function(t){if(g.loading("close"),"00"==t.error){var s=[];for(i=0;i<t.result1.length;i++)s.push(t.result1[i].time);0==y?(option1.xAxis.data=["周一","周二","周三","周四","周五"],option2.xAxis.data=["周一","周二","周三","周四","周五"],option3.xAxis.data=["周一","周二","周三","周四","周五"],option.xAxis[0].data=["周一","周二","周三","周四","周五"]):1==y?(option1.xAxis.data=["四月","五月","六月"],option2.xAxis.data=["四月","五月","六月"],option3.xAxis.data=["四月","五月","六月"],option.xAxis[0].data=["四月","五月","六月"]):2==y?(option1.xAxis.data=["七月","八月","九月"],option2.xAxis.data=["七月","八月","九月"],option3.xAxis.data=["七月","八月","九月"],option.xAxis[0].data=["七月","八月","九月"]):3==y?(option1.xAxis.data=["十月","十一月","十二月"],option2.xAxis.data=["十月","十一月","十二月"],option3.xAxis.data=["十月","十一月","十二月"],option.xAxis[0].data=["十月","十一月","十二月"]):4==y&&(option1.xAxis.data=["一月","二月","三月"],option2.xAxis.data=["一月","二月","三月"],option3.xAxis.data=["一月","二月","三月"],option.xAxis[0].data=["一月","二月","三月"]),g.c=t.result1,g.chart_init(x,f,y,u);for(var e=t.result2,a=[],i=0;i<e.length;i++){var n=e[i];a.push(n.yxkhs)}var o=Number(Math.max.apply(null,a));o+=.2*o;var l=echarts.init(document.getElementById("main1"));option1.yAxis.max=Math.ceil(o),option1.series[0].data=a,l.setOption(option1),l.off("click"),l.on("click",function(t){if(0==u)x=s[t.dataIndex],f=s[t.dataIndex];else if(1==u){var e=s[t.dataIndex],a=e.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();x=e+"-01",f=e+"-"+o}layer.open({type:2,title:"意向客户数列表",content:"/static/page/index/saler_customer_list.html?startTime="+x+"&endTime="+f,area:["100%","100%"]})});var r=t.result3,d=[];for(i=0;i<r.length;i++){n=r[i];d.push(n.bfl)}o=Number(Math.max.apply(null,d));o+=.2*o;var p=echarts.init(document.getElementById("main2"));option2.yAxis.max=Math.ceil(o),option2.series[0].data=d,p.setOption(option2),p.off("click"),p.on("click",function(t){if(0==u)x=s[t.dataIndex],f=s[t.dataIndex];else if(1==u){var e=s[t.dataIndex],a=e.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();x=e+"-01",f=e+"-"+o}layer.open({type:2,title:"拜访量列表",content:"/static/page/index/saler_bfl_list.html?startTime="+x+"&endTime="+f,area:["100%","100%"]})});var h=t.result4,m=[];for(i=0;i<h.length;i++){n=h[i];m.push(n.qdl)}o=Number(Math.max.apply(null,m));o+=.2*o;var c=echarts.init(document.getElementById("main3"));option3.yAxis.max=Math.ceil(o),option3.series[0].data=m,c.setOption(option3),c.off("click"),c.on("click",function(t){if(0==u)x=s[t.dataIndex],f=s[t.dataIndex];else if(1==u){var e=s[t.dataIndex],a=e.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();x=e+"-01",f=e+"-"+o}layer.open({type:2,title:"签单量列表",content:"/static/page/index/saler_qdl_list.html?startTime="+x+"&endTime="+f,area:["100%","100%"]})})}else layer.msg(t.msg)}})},chart_init:function(l,r,t,d){this.myChart=echarts.init(document.getElementById("main"));var e=this.dhl,a=this.yxdhl;amount_MAX=Number(Math.max.apply(null,e)),amount_MAX+=.1*amount_MAX,amount_MAX1=Number(Math.max.apply(null,a)),amount_MAX1+=amount_MAX1,option.yAxis[0].max=Math.ceil(amount_MAX),option.yAxis[1].max=Math.ceil(amount_MAX1),option.series[0].data=e,option.series[1].data=a,this.myChart.setOption(option),this.myChart.off("click"),this.myChart.on("click",function(t){if(0==d)l=sjList[t.dataIndex],r=sjList[t.dataIndex];else if(1==d){var e=sjList[t.dataIndex],a=e.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();l=e+"-01",r=e+"-"+o}var s="/static/page/index/saler_follow_list.html?startTime="+l+"&endTime="+r+"&type=1";if(0==t.seriesIndex)layer.open({type:2,title:"电话量",content:s,area:["100%","100%"]});else if(1==t.seriesIndex)layer.open({type:2,title:"有效电话量",content:s+"&valid=1",area:["100%","100%"]})})},getData1:function(e){var a=this;a.loading(),$.ajax({url:config.api_Xstj,async:!0,data:{time:e},success:function(t){a.loading("close"),"00"==t.error?(a.c1=t.result,a.chart_init1(e,a.c1)):layer.msg(t.msg)}})},chart_init1:function(t,a){this.myChart4=echarts.init(document.getElementById("main4")),option4.xAxis[0].data=this.name1;var e=this.khsl,i=this.ddsl,n=this.ddzje,o=this.dkje;option4.series[0].data=e,option4.series[1].data=i,option4.series[2].data=n,option4.series[3].data=o,amount_MAX=Number(Math.max.apply(null,e.concat(i))),amount_MAX+=amount_MAX,option4.yAxis[0].max=Math.ceil(amount_MAX),amount_MAX1=Number(Math.max.apply(null,n.concat(o))),amount_MAX1+=.1*amount_MAX1,option4.yAxis[1].max=Math.ceil(amount_MAX1);var s=t+"-04-01",l=Number(t)+1+"-03-31";this.myChart4.setOption(option4),this.myChart4.off("click"),this.myChart4.on("click",function(t){console.log(t);var e=a[t.dataIndex].userId;if(0==t.seriesIndex)layer.open({type:2,title:"已成交客户列表",content:"/static/page/index/saler_turnover_list.html?startTime="+s+"&endTime="+l+"&flag=1&USER_ID="+e,area:["100%","100%"]});else if(1==t.seriesIndex)layer.open({type:2,title:"订单列表",content:"/static/page/index/saler_turnover_list.html?startTime="+s+"&endTime="+l+"&flag=2&USER_ID="+e,area:["100%","100%"]});else if(2==t.seriesIndex)layer.open({type:2,title:"订单列表",content:"/static/page/index/saler_turnover_list.html?startTime="+s+"&endTime="+l+"&flag=2&USER_ID="+e,area:["100%","100%"]});else if(3==t.seriesIndex)layer.open({type:2,title:"回款列表",content:"/static/page/index/saler_turnover_list.html?startTime="+s+"&endTime="+l+"&flag=3&USER_ID="+e,area:["100%","100%"]})})},getData2:function(t){var d=this,e=t.split("-"),a=e[0],i=e[1],n=new Date(a,i,0).getDate();d.loading(),$.ajax({url:config.api_detail,async:!0,data:{startTime:t+"-01",endTime:t+"-"+n},success:function(n){if(d.loading("close"),"00"==n.error){for(var t=[],e=[],a=[],i=0;i<n.result.length;i++){var o=n.result[i];t.push(o.name),e.push(o.dhl),null!=o.yxkhs&&a.push(o.yxkhs)}var s=Number(Math.max.apply(null,e));s+=.2*s;var l=Number(Math.max.apply(null,a));l+=l;var r=echarts.init(document.getElementById("main6"));option6.xAxis[0].data=t,option6.series[0].data=e,option6.series[1].data=a,option6.yAxis[0].max=Math.ceil(s),option6.yAxis[1].max=Math.ceil(l),r.setOption(option6),r.off("click"),r.on("click",function(t){console.log(t);var e=n.result[t.dataIndex].saleId,a=n.result[t.dataIndex].name,i="/static/page/dxPerson.html?time="+d.month1+"&id="+e+"&saleName="+a;layer.open({type:2,title:"电销业绩目标完成情况",content:i,area:["100%","100%"]})})}else layer.msg(n.msg)}})},getDataDx:function(t,r){var d,p,h=this,m=h.nowMonth(),c=m;h.loading(),$.ajax({url:config.api_detail,async:!0,data:{startTime:t+"-04",endTime:Number(t)+1+"-03",saleId:"81236178199f4c5d83098178749fe6e1"},success:function(t){if(h.loading("close"),"00"==t.error){h.dx.list=t.result;var e=[],a=[];if(null==r)for(var i=0;i<t.result.length;i++){var n=t.result[i];e.push(n.dhl),a.push(n.yxkhs),m==n.time&&(h.idchange3=i,h.dx.dhl=n.dhl||0,h.dx.mbdhl=n.mbdhl||0,h.dx.yxkhs=n.yxkhs||0,h.dx.mbyxkhs=n.mbyxkhs||0,d=Math.round(h.dx.dhl/h.dx.mbdhl*1e4)/100,p=d+"%","Infinity"==d?d=100:isNaN(d)&&(d=0),mmd=Math.round(h.dx.yxkhs/h.dx.mbyxkhs*1e4)/100,"Infinity"==mmd?mmd=100:isNaN(mmd)&&(d=0),mmd1=mmd+"%")}else{for(i=0;i<t.result.length;i++){n=t.result[i];e.push(n.dhl),a.push(n.yxkhs)}h.dx.dhl=t.result[h.idchange3].dhl||0,h.dx.mbdhl=t.result[h.idchange3].mbdhl||0,h.dx.yxkhs=t.result[h.idchange3].yxkhs||0,h.dx.mbyxkhs=t.result[h.idchange3].mbyxkhs||0,"Infinity"==(d=Math.round(h.dx.dhl/h.dx.mbdhl*1e4)/100)?d=100:isNaN(d)&&(d=0),p=d+"%",mmd=Math.round(h.dx.yxkhs/h.dx.mbyxkhs*1e4)/100,"Infinity"==mmd?mmd=100:isNaN(mmd)&&(mmd=0),mmd1=mmd+"%"}var o=Number(Math.max.apply(null,e));o+=.2*o;var s=Number(Math.max.apply(null,a));s+=s;var l=echarts.init(document.getElementById("dxOnly"));dxOnly.series[0].data=e,dxOnly.series[1].data=a,dxOnly.yAxis[0].max=Math.ceil(o),dxOnly.yAxis[1].max=Math.ceil(s),l.setOption(dxOnly),h.dxhx(d,p,mmd,mmd1,c),l.off("click"),l.on("click",function(t){if(0==t.seriesIndex||1==t.seriesIndex){c=h.dx.list[t.dataIndex].time;var e=h.dx.list[t.dataIndex];h.dx.dhl=e.dhl||0,h.dx.mbdhl=e.mbdhl||0,h.dx.yxkhs=e.yxkhs||0,h.dx.mbyxkhs=e.mbyxkhs||0,"Infinity"==(d=Math.round(e.dhl/e.mbdhl*1e4)/100)&&(d=100),p=d+"%",mmd=Math.round(e.yxkhs/e.mbyxkhs*1e4)/100,"Infinity"==mmd&&(mmd=100),mmd1=mmd+"%",h.dxhx(d,p,mmd,mmd1,c)}})}else layer.msg(t.msg)}})},dxhx:function(t,e,a,i,n){var o=n.split("-"),s=o[0],l=o[1],r=new Date(s,l,0).getDate();t0=n+"-01",t1=n+"-"+r,pieChartOption.series[0].data[0].name=e,pieChartOption.series[0].data[0].value=t,pieChartOption.series[0].data[1].value=100-t;var d=document.getElementById("pie"),p=echarts.init(d);p.setOption(pieChartOption),p.off("click"),p.on("click",function(t){var e="/static/page/index/saler_follow_list.html?startTime="+t0+"&endTime="+t1+"&type=1";layer.open({type:2,title:"电话量",content:e,area:["100%","100%"]})}),pieChartOption2.series[0].data[0].name=i,pieChartOption2.series[0].data[0].value=a,pieChartOption2.series[0].data[1].value=100-a;var h=document.getElementById("pie2"),m=echarts.init(h);m.setOption(pieChartOption2),m.off("click"),m.on("click",function(t){layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_customer_list.html?startTime="+t0+"&endTime="+t1,area:["100%","100%"]})})},getDataSwgw:function(){var r,d,p,h=this;$.ajax({type:"post",url:config.api_swgw,async:!0,data:{saleId:"0fa773564df74733b6ba66f448ff9acb"},success:function(t){var e=t.result2;h.swgw.yjdk=e.yjdk||0,h.swgw.mbyjdk=e.mbyjdk||0,h.swgw.htsl=e.htsl||0,h.swgw.mbhtsl=e.mbhtsl||0,h.swgw.ddzje=e.ddzje||0,h.swgw.mbddzje=e.mbddzje||0,"Infinity"==(r=Math.round(e.yjdk/e.mbyjdk*1e4)/100)&&(r=100),aa1=r+"%","Infinity"==(d=Math.round(e.htsl/e.mbhtsl*1e4)/100)&&(d=100),bb1=d+"%","Infinity"==(p=Math.round(e.ddzje/e.mbddzje*1e4)/100)&&(p=100),cc1=p+"%",pieChartOption_1.series[0].data[0].name=aa1,pieChartOption_1.series[0].data[0].value=r,pieChartOption_1.series[0].data[1].value=100-r;var a=document.getElementById("swgw1"),i=echarts.init(a);i.setOption(pieChartOption_1),i.off("click"),i.on("click",function(t){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html",area:["100%","100%"]})}),pieChartOption_2.series[0].data[0].name=bb1,pieChartOption_2.series[0].data[0].value=d,pieChartOption_2.series[0].data[1].value=100-d;var n=document.getElementById("swgw2"),o=echarts.init(n);o.setOption(pieChartOption_2),o.off("click"),o.on("click",function(t){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html",area:["100%","100%"]})}),pieChartOption_3.series[0].data[0].name=cc1,pieChartOption_3.series[0].data[0].value=p,pieChartOption_3.series[0].data[1].value=100-p;var s=document.getElementById("swgw3");(l=echarts.init(s)).setOption(pieChartOption_3),l.off("click"),l.on("click",function(t){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html",area:["100%","100%"]})}),pieChartOption_3.series[0].data[0].name=cc1,pieChartOption_3.series[0].data[0].value=p,pieChartOption_3.series[0].data[1].value=100-p;var l;s=document.getElementById("swgw4");(l=echarts.init(s)).setOption(pieChartOption_3),l.off("click"),l.on("click",function(t){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html",area:["100%","100%"]})})}})},getYjmb:function(l,r,d){var t,e,p=this,a=(new Date).getFullYear().toString();if(0==d)0==l?(t=a+"-04-01",e=a+"-06-30"):1==l?(t=a+"-07-01",e=a+"-09-30"):2==l?(t=a+"-10-01",e=a+"-12-31"):3==l&&(t=Number(a)+1+"-01-01",e=Number(a)+1+"-03-31");else if(1==d){var i=l.split("-"),n=i[0],o=i[1],s=new Date(n,o,0).getDate();t=l+"-01",e=l+"-"+s}$.ajax({type:"post",url:config.api_Yjmb,async:!0,data:{startTime:t,endTime:e,type:r},success:function(n){if(p.loading("close"),"00"==n.error){for(var t=[],e=[],a=0;a<n.result.length;a++){var i=n.result[a];t.push(i.name),e.push(i.dkje)}var o=Number(Math.max.apply(null,e));o+=.2*o;var s=echarts.init(document.getElementById("main5"));option5.xAxis.data=t,option5.yAxis.max=Math.ceil(o),option5.series[0].data=e,s.setOption(option5),s.off("click"),s.on("click",function(t){var e=n.result[t.dataIndex].userId,a=n.result[t.dataIndex].name,i="/static/page/swPerson.html?time="+(0==r?(new Date).getFullYear().toString():l)+"&id="+e+"&saleName="+a+"&jidu="+l+"&type="+r+"&ch="+d;layer.open({type:2,title:"商务顾问业绩目标完成情况",content:i,area:["100%","100%"]})})}else layer.msg(n.msg)}})},getCainian:function(t){var l=this,e=t+"-04-01",a=Number(t)+1+"-03-31";$.ajax({type:"post",url:config.api_yzjb,async:!0,data:{startTime:e,endTime:a},success:function(n){if(l.loading("close"),"00"==n.error){l.c4=n.result;for(var t=[],e=[],a=0;a<n.result.length;a++){var i=n.result[a];t.push(i.NAME),e.push(i.je)}var o=Number(Math.max.apply(null,e));o+=.2*o;var s=echarts.init(document.getElementById("main7"));option7.xAxis.data=t,option7.yAxis.max=Math.ceil(o),option7.series[0].data=e,s.setOption(option7),s.off("click"),s.on("click",function(t){var e=n.result[t.dataIndex].userId,a=n.result[t.dataIndex].NAME,i="/static/page/yunzuo.html?time="+l.cainian+"&id="+e+"&saleName="+a;layer.open({type:2,title:"运作业绩目标完成情况",content:i,area:["100%","100%"]})})}else layer.msg(n.msg)}})},showMonthFirstDay:function(){var t=new Date;t.setMonth(t.getMonth()+1),t.setDate(0);var e=new Date(t).getDate(),a=(new Date).getFullYear().toString(),i=(new Date).getMonth()+1,n=a+"-"+(i=i<10?"0"+i:i)+"-01",o=a+"-"+i+"-"+e;this.startyear=n,this.endyear=o},showWen:function(){var e=this;$.get(config.api_zhou,{type:0},function(t){e.sevens=t.result,e.month=e.sevens[0],e.getData(e.month,0,0)})},tab:function(t){1==t?this.taskList():2==t?this.shen():3==t?this.tx1():4==t&&this.tx2()},taskList:function(e){var a=this;e&&(this.task.pageNum=e),a.loading(),a.postDataTask.pageSize=this.task.pageSize,a.postDataTask.pageNo=this.task.pageNum,require(["pagination"],function(t){$.ajax({url:config.api_task,async:!0,data:a.postDataTask}).done(function(t){a.task=t.result,a.pagi?($(".pagi").pagination("updatePages",a.task.pages),1==e&&$(".pagi").pagination("goToPage",a.task.pageNum)):(a.pagi=1,$(".pagi").pagination({pages:a.task.pages,showCtrl:!0,displayPage:6,currentPage:a.task.pageNum,onSelect:function(t){a.task.pageNum=t,a.taskList()}})),a.loading("close")})})},shen:function(e){var a=this;e&&(this.shenhe.pageNum=e),a.loading(),a.postDataShenhe.pageSize=this.shenhe.pageSize,a.postDataShenhe.pageNo=this.shenhe.pageNum,require(["pagination"],function(t){$.ajax({url:config.api_shenhe,async:!0,data:a.postDataShenhe}).done(function(t){a.shenhe=t.result,a.pagi1?($(".pagi1").pagination("updatePages",a.shenhe.pages),1==e&&$(".pagi1").pagination("goToPage",a.shenhe.pageNum)):(a.pagi1=1,$(".pagi1").pagination({pages:a.shenhe.pages,showCtrl:!0,displayPage:6,currentPage:a.shenhe.pageNum,onSelect:function(t){a.shenhe.pageNum=t,a.shen()}})),a.loading("close")})})},tx1:function(e){var a=this;e&&(this.mytx.pageNum=e),a.loading(),a.postDataMytx.pageSize=this.mytx.pageSize,a.postDataMytx.pageNo=this.mytx.pageNum,require(["pagination"],function(t){$.ajax({url:config.api_wdtx,async:!0,data:a.postDataMytx}).done(function(t){a.mytx=t.result,a.pagi2?($(".pagi2").pagination("updatePages",a.mytx.pages),1==e&&$(".pagi2").pagination("goToPage",a.mytx.pageNum)):(a.pagi2=1,$(".pagi2").pagination({pages:a.mytx.pages,showCtrl:!0,displayPage:6,currentPage:a.mytx.pageNum,onSelect:function(t){a.mytx.pageNum=t,a.tx1()}})),a.loading("close")})})},tx2:function(e){var a=this;e&&(this.gqtx.pageNum=e),a.loading(),a.postDataGqtx.pageSize=this.gqtx.pageSize,a.postDataGqtx.pageNo=this.gqtx.pageNum,require(["pagination"],function(t){$.ajax({url:config.api_gqtx,async:!0,data:a.postDataGqtx}).done(function(t){a.gqtx=t.result,a.pagi3?($(".pagi3").pagination("updatePages",a.gqtx.pages),1==e&&$(".pagi3").pagination("goToPage",a.gqtx.pageNum)):(a.pagi3=1,$(".pagi3").pagination({pages:a.gqtx.pages,showCtrl:!0,displayPage:6,currentPage:a.gqtx.pageNum,onSelect:function(t){a.gqtx.pageNum=t,a.tx2()}})),a.loading("close")})})},customer_case_view:function(t,e){var a,i,n=this.year;0==e?(a=n+"-04-01",i=Number(n)+1+"-03-31"):(a=this.startyear,i=this.endyear);layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_turnover_list.html?startTime="+a+"&endTime="+i+"&flag="+t,area:["100%","100%"]})},order_customer_view:function(){layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_customer_list.html?startTime="+this.startyear+"&endTime="+this.endyear,area:["100%","100%"]})},viewTask:function(t,e,a,i,n){if("待发快递"==i)layer.open({type:2,title:"查看详情",content:"/express/goEdit.do?id="+n+"&mark1=1",area:["100%","100%"]});else layer.open({type:2,title:"查看详情",content:"/workBench/views.do?id="+t+"&fqr="+e+"&dfbgId="+a,area:["100%","100%"]})},sh:function(t,e,a){var i="/vistsh/goEdit.do?id=";switch(t){case"外访":break;case"诉讼/仲裁":i="/lawsuitaudit/goEdit.do?id=";break;case"案件报告":i="/workBench/views1.do?id="}layer.open({type:2,title:"查看详情",content:i+e+"&debtorId="+a,area:["100%","100%"]})},setSuccess:function(t,e){var a=this,i=layer.confirm("确认完成?",function(){$.post("/order/updateCallInfo",{id:t}).done(function(t){"00"==t.error?(1==e?a.tx1():2==e&&a.tx2(),layer.close(i)):(layer.close(i),layer.msg(t.msg))})})},assis_view:function(t,e){layer.open({type:2,title:e,content:"/static/page/index/saler_assistant.html?flag="+t,area:["100%","100%"]})},nowMonth:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;return a=a<10?"0"+a:a,e.toString()+"-"+a.toString()},loop:function(){var t=this;setInterval(function(){$.ajax({url:config.api_wdtx,async:!0,data:t.postDataMytx}).done(function(t){var e=new Date;e.setMinutes(e.getMinutes()+10);for(var a=e.getTime(),i=t.result.list,n=0;n<i.length;n++){var o=new Date(i[n].time).getTime(),s=o-a;console.log(a,o,s),s<=6e4&&0<s&&layer.msg("你有提醒即将过期")}})},6e4)}}})}),window.parentFnc=function(t){layer.closeAll(),window.app.getCaseRecord(window.app.type)};